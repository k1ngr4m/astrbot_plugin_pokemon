# 宝可梦游戏插件

一个基于 AstrBot 的完整宝可梦游戏插件，让你在聊天中体验经典的宝可梦收集、训练、冒险和战斗玩法。

## 🌟 功能特性

### 🎮 核心玩法
- **角色注册与成长**：注册成为训练家，通过签到获得金币和道具
- **宝可梦收集**：拥有超过800种初代到九代的宝可梦可供收集
- **属性系统**：每只宝可梦都有详细的个体值(IV)、努力值(EV)和属性
- **训练家系统**：独特的训练家身份系统，与宝可梦一起成长

### ⚔️ 战斗系统
- **策略战斗**：基于属性、等级、个体值的战斗机制
- **经验成长**：战斗后宝可梦和训练家都能获得经验值
- **等级提升**：宝可梦升级时属性会相应提升
- **战斗记录**：记录详细的战斗日志，回顾精彩对战

### 🌍 冒险探索
- **多区域冒险**：多个不同等级区域可供探索
- **野生遭遇**：在区域中随机遭遇野生宝可梦
- **冷却机制**：合理设置冒险冷却时间
- **随机事件**：冒险过程中可能遇到各种随机事件

### 👥 队伍管理
- **队伍组建**：最多可设置6只宝可梦的队伍
- **出战宝可梦**：队伍中的第一只为当前出战宝可梦
- **战术搭配**：灵活调整队伍配置应对不同挑战
- **技能学习**：宝可梦可学习多种技能，支持4个技能槽位

### ⭐ 宝可梦收藏
- **收藏功能**：可收藏你喜欢的宝可梦，方便快速查看
- **分页展示**：收藏的宝可梦支持分页显示，便于浏览
- **收藏管理**：随时收藏或取消收藏宝可梦
- **个性化展示**：单独查看收藏列表，打造专属宝可梦收藏

### 🛒 商店系统
- **道具购买**：购买精灵球、药剂等道具
- **库存管理**：商店库存有限，合理分配资源
- **多样化商品**：不同稀有度的道具可供选择
- **经济系统**：通过签到、冒险获得金币，维持游戏经济平衡

### 🌱 进化系统
- **进化路径**：支持宝可梦的进化功能
- **进化条件**：根据不同宝可梦设置不同的进化条件
- **进化预览**：查看宝可梦的进化状态和进化树

### 📈 升级速率系统
- **多种成长曲线**：支持6种不同的宝可梦成长速率类型
- **数学公式驱动**：每种成长速率都有对应的数学公式计算所需经验值
- **个性化成长**：不同宝可梦根据其特性拥有不同的升级速率

### 🖼️ 图形界面
- **精美图鉴**：通过绘制生成精美的宝可梦图鉴
- **详情展示**：显示宝可梦的详细信息
- **界面风格**：多种视觉样式，提升用户体验

### 🌐 Web管理后台
- **用户管理**：可视化管理用户数据和宝可梦
- **后台管理**：提供Web界面进行数据管理
- **管理员工具**：支持管理员进行数据维护

## 📋 命令列表

### 📝 注册与初始化
- `/宝可梦注册` - 注册成为宝可梦游戏玩家，开始你的宝可梦之旅
- `/宝可梦签到` - 每日签到，获得金币和道具奖励
- `/初始选择 [宝可梦ID]` - 选择初始宝可梦
- `/宝可梦个人资料` - 查看用户个人资料、等级、经验和金币

### 🎒 用户资产
- `/宝可梦背包` - 查看用户背包中的所有道具
- `/出售道具 [道具ID] [数量]` - 出售道具，获得金币

### 📊 宝可梦和队伍管理
- `/我的宝可梦 [宝可梦ID]` - 查看你的宝可梦列表/详情
- `/学习招式 [宝可梦ID] [招式ID] [槽位]` - 学习宝可梦的技能，最多4个槽位
- `/查询招式 [招式ID]/[招式名称]` - 查看招式详情
- `/查询特性 [特性名称]` - 查看特性详情
- `/宝可梦进化 [宝可梦ID]` - 让宝可梦进化
- `/查看进化状态 [宝可梦ID]` - 查看宝可梦进化状态
- `/图鉴` - 查看宝可梦图鉴
- `/收藏宝可梦 [宝可梦ID]` - 收藏指定的宝可梦
- `/取消收藏宝可梦 [宝可梦ID]` - 取消收藏指定的宝可梦
- `/查看收藏宝可梦 [页码]` - 查看收藏的宝可梦列表，支持分页显示
- `/装备持有物 [宝可梦ID] [道具ID]` - 为指定的宝可梦装备持有物
- `/修改宝可梦昵称 [宝可梦ID] [昵称]` - 修改宝可梦的昵称

### ⛰️ 冒险系统
- `/设置队伍 [ID1] [ID2] ...` - 设置队伍中的宝可梦，最多6只
- `/查看队伍` - 查看当前队伍配置
- `/查看区域` - 查看所有可冒险的区域
- `/冒险 [区域ID]` - 在指定区域进行冒险
- `/战斗` - 与当前遇到的野生宝可梦战斗
- `/捕捉 <物品ID>` - 捕捉当前遇到的野生宝可梦
- `/逃跑` - 逃跑离开当前遇到的野生宝可梦
- `/查看战斗 [战斗ID]` - 查看战斗历史记录详情

### 🏪 商店系统
- `/宝可梦商店 [商店ID]` - 查看商店中的所有商品
- `/宝可梦商店购买 [商店ID] [商品ID] [数量]` - 购买商店中的商品

### 🔧 通用帮助
- `/宝可梦帮助` - 查看所有可用命令的详细说明
- `/开启宝可梦后台管理` - 启动Web后台管理服务器(管理员功能)

## ⚙️ 配置说明

### 用户配置
```json
{
  "user": {
    "initial_coins": 200
  }
}
```
- `initial_coins`：新用户注册时获得的初始金币数量

### Web管理界面配置
```json
{
  "webui": {
    "secret_key": "SecretKey",
    "port": 6199
  }
}
```
- `secret_key`：登录管理界面的密钥，建议使用随机字符串
- `port`：Web管理界面端口，请确保端口未被占用

### 冒险配置
```json
{
  "adventure": {
    "cooldown_seconds": 10
  }
}
```
- `cooldown_seconds`：每次冒险后的冷却时间（秒）

## 📦 依赖要求

- `flask==2.3.2`
- AstrBot 框架

## 🚀 快速开始

1. **安装插件**：将本插件放入 AstrBot 的 plugins 目录
2. **启动机器人**：重启 AstrBot 以加载插件
3. **注册账号**：发送 `/宝可梦注册` 开始游戏
4. **选择初始宝可梦**：使用 `/初始选择 <ID>` 选择你的第一只宝可梦
5. **设置队伍**：使用 `/设置队伍 <ID>` 组建你的宝可梦队伍
6. **开始冒险**：使用 `/查看区域` 和 `/冒险` 开始你的冒险之旅
7. **(可选) 启动管理后台**：使用 `/开启宝可梦后台管理` 启动Web管理界面


## 🛠️ 开发贡献

### 升级速率公式说明

宝可梦升级的速率使用 `pokemon_species` 表中的 `growth_rate_id` 字段定义，具体对应关系如下：

| ID | 成长类型 | 经验值计算公式 |
|----|----------|----------------|
| 1 | slow | \\(\\frac{5x^3}{4}\\) |
| 2 | medium | \\(x^3\\) |
| 3 | fast | \\(\\frac{4x^3}{5}\\) |
| 4 | medium-slow | \\(\\frac{6x^3}{5} - 15x^2 + 100x - 140\\) |
| 5 | slow-then-very-fast | \\(\\begin{cases} \\frac{ x^3 \\left( 100 - x \\right) }{50}, & \\text{if } x \\leq 50 \\\\ \\frac{ x^3 \\left( 150 - x \\right) }{100}, & \\text{if } 50 < x \\leq 68 \\\\ \\frac{ x^3 \\left( 1274 + (x \\bmod 3)^2 - 9 (x \\bmod 3) - 20 \\left\\lfloor \\frac{x}{3} \\right\\rfloor \\right) }{1000}, & \\text{if } 68 < x \\leq 98 \\\\ \\frac{ x^3 \\left( 160 - x \\right) }{100}, & \\text{if } x > 98 \\\\ \\end{cases}\\) |
| 6 | fast-then-very-slow | \\(\\begin{cases} \\frac{ x^3 \\left( 24 + \\left\\lfloor \\frac{x+1}{3} \\right\\rfloor \\right) }{50}, & \\text{if } x \\leq 15 \\\\ \\frac{ x^3 \\left( 14 + x \\right) }{50}, & \\text{if } 15 < x \\leq 35 \\\\ \\frac{ x^3 \\left( 32 + \\left\\lfloor \\frac{x}{2} \\right\\rfloor \\right ) }{50}, & \\text{if } x > 35 \\\\ \\end{cases}\\) |

其中，x 表示目标等级，公式计算出的结果为达到该等级所需的总经验值。

### 项目结构
```
astrbot_plugin_pokemon/
├── main.py                 # 插件入口点
├── metadata.yaml           # 插件元数据
├── _conf_schema.json       # 配置模式定义
├── requirements.txt        # 依赖列表
├── assets/                 # 静态资源
├── manager/                # 管理界面相关
├── astrbot_plugin_pokemon/ # 核心代码
│   ├── config.py           # 配置管理
│   ├── core/               # 核心业务逻辑
│   ├── infrastructure/     # 基础设施层
│   ├── interface/          # 接口层
│   └── utils/              # 工具类
└── tests/                  # 测试用例
```

### 贡献指南
1. Fork 本仓库
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

## 📋 开发计划

- [ ] 添加新的冒险区域和事件
- [ ] 增加玩家对战
- [ ] 增加Web端界面
- [ ] 添加更多宝可梦数据和技能
- [ ] 优化战斗算法
- [ ] 扩展进化系统

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个插件！

## 📄 许可证

本项目基于 MIT 许可证发布，详见 LICENSE 文件。

---

> ⚠️ 本插件仅供娱乐使用，请合理安排游戏时间，享受宝可梦带来的乐趣！